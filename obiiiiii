
import requests
import json

# 1. Configuration
BASE_URL = "http://127.0.0.1:5000"
LOAD_ID = "your_test_file_name"  # The file sitting in your 'inbound' container (no .csv)

# 2. Trigger the API
print(f"Triggering process for Load ID: {LOAD_ID}...")
response = requests.get(f"{BASE_URL}/save/{LOAD_ID}")

# 3. Check the Results
if response.status_code == 200:
    print("✅ Success!")
    print(json.dumps(response.json(), indent=2))
else:
    print(f"❌ Failed with status code: {response.status_code}")
    print(response.text)




# run_process.py
import pandas as pd
from io import StringIO

def process_data(raw_text):
    """
    The Brain: Takes raw CSV string, processes it, returns a CSV string.
    """
    try:
        # 1. Load the string into a DataFrame
        # StringIO makes the string act like a file
        df = pd.read_csv(StringIO(raw_text))
        
        # --- YOUR LOGIC HERE ---
        # Example: Let's say you're adding a 'processed' column
        df['status'] = 'processed'
        # -----------------------

        # 2. Convert back to CSV string to send back to main.py
        # index=False prevents Pandas from adding a junk 'Unnamed: 0' column
        return df.to_csv(index=False)

    except Exception as e:
        print(f"Error in processing: {e}")
        return None
